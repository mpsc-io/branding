"use strict";(self.webpackChunkuser_guide=self.webpackChunkuser_guide||[]).push([[8720],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=r,h=m["".concat(s,".").concat(d)]||m[d]||u[d]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},41073:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const i={sidebar_position:1,id:"getting-started-gcp",slug:"/basics/getting-started-gcp"},o="Getting Started with GCP",l={unversionedId:"basics/getting-started-gcp",id:"basics/getting-started-gcp",title:"Getting Started with GCP",description:"Kubernetes, also known as K8s, is a popular open-source container orchestration platform. It is used to manage and deploy containerized applications at scale. Google Cloud Platform (GCP) is a cloud computing platform offered by Google that provides infrastructure services for hosting applications.",source:"@site/docs/basics/getting-started-gcp.md",sourceDirName:"basics",slug:"/basics/getting-started-gcp",permalink:"/docs/basics/getting-started-gcp",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,id:"getting-started-gcp",slug:"/basics/getting-started-gcp"},sidebar:"tutorialSidebar",previous:{title:"Basics",permalink:"/docs/category/basics"},next:{title:"Minikube",permalink:"/docs/basics/minikube"}},s={},p=[{value:"Using CI/CD with GCR",id:"using-cicd-with-gcr",level:3}],c={toc:p};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"getting-started-with-gcp"},"Getting Started with GCP"),(0,r.kt)("p",null,"Kubernetes, also known as K8s, is a popular open-source container orchestration platform. It is used to manage and deploy containerized applications at scale. Google Cloud Platform (GCP) is a cloud computing platform offered by Google that provides infrastructure services for hosting applications."),(0,r.kt)("p",null,"This documentation will guide you through setting up a Kubernetes cluster in GCP, deploying applications, creating services, and using ingress to expose those services to the internet."),(0,r.kt)("p",null,"Prerequisites:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"A Google Cloud Platform account."),(0,r.kt)("li",{parentName:"ol"},"gcloud command-line tool installed."),(0,r.kt)("li",{parentName:"ol"},"A basic understanding of Kubernetes.")),(0,r.kt)("p",null,"Step 1: Create a Kubernetes cluster in GCP"),(0,r.kt)("p",null,"To create a Kubernetes cluster in GCP, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open the GCP Console and select the project you want to use."),(0,r.kt)("li",{parentName:"ol"},"In the navigation menu, click on Kubernetes Engine and then click on Clusters."),(0,r.kt)("li",{parentName:"ol"},"Click on Create Cluster and configure the following settings:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Cluster name: Enter a name for your cluster."),(0,r.kt)("li",{parentName:"ul"},"Zone: Select the zone where you want your cluster to be located."),(0,r.kt)("li",{parentName:"ul"},"Number of nodes: Specify the number of nodes you want in your cluster."),(0,r.kt)("li",{parentName:"ul"},"Machine type: Select the machine type you want to use for your nodes."))),(0,r.kt)("li",{parentName:"ol"},"Click on Create and wait for the cluster to be created.")),(0,r.kt)("p",null,"Step 2: Deploy an application to the cluster"),(0,r.kt)("p",null,"Once your cluster is up and running, you can deploy your application to it. To deploy an application, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a Kubernetes deployment manifest file with the specifications of your application."),(0,r.kt)("li",{parentName:"ol"},"Apply the deployment manifest file to the cluster using the kubectl apply command. For example:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"\nkubectl apply -f deployment.yaml\n")),"This command will create a deployment for your application based on the specifications in the deployment.yaml file."),(0,r.kt)("li",{parentName:"ol"},"Verify that the deployment was created successfully by running the following command:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-arduino"},"\nkubectl get deployments\n")),(0,r.kt)("p",null,"This command will list all the deployments in your cluster."),(0,r.kt)("p",null,"Step 3: Create a service for your application"),(0,r.kt)("p",null,"After your application has been deployed, you can create a service to expose it to the internet. To create a service, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a Kubernetes service manifest file with the specifications of your service."),(0,r.kt)("li",{parentName:"ol"},"Apply the service manifest file to the cluster using the kubectl apply command. For example:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\nkubectl apply -f service.yaml\n")),(0,r.kt)("p",null,"This command will create a service for your application based on the specifications in the service.yaml file."),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Verify that the service was created successfully by running the following command:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-arduino"},"kubectl get services\n")),(0,r.kt)("p",null,"This command will list all the services in your cluster."),(0,r.kt)("p",null,"Step 4: Use ingress to expose your service to the internet"),(0,r.kt)("p",null,"To expose your service to the internet, you can use ingress. Ingress is a Kubernetes resource that provides a way to manage external access to the services in your cluster. To use ingress, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Install the NGINX ingress controller in your cluster using the following command:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.1.0/deploy/static/provider/cloud/deploy.yaml\n")),(0,r.kt)("p",null,"This command will install the NGINX ingress controller in your cluster.\n2. Create an ingress manifest file with the specifications of your ingress resource. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: my-ingress\n  annotations:\n    nginx.ingress.kubernetes.io/rewrite-target: /\nspec:\n  rules:\n  - host: myapp.example.com\n    http:\n      paths:\n      - path: /myapp\n        pathType: Prefix\n        backend:\n          service:\n            name: my-service\n            port:\n              name: http\n")),(0,r.kt)("p",null,"This file defines an ingress resource that routes traffic from the host ",(0,r.kt)("inlineCode",{parentName:"p"},"myapp.example.com")," to the service named ",(0,r.kt)("inlineCode",{parentName:"p"},"my-service"),".\n2. Apply the ingress manifest file to the cluster using the kubectl apply command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\nkubectl apply -f ingress.yaml\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Verify that the ingress was created successfully by running the following command:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-arduino"},"\nkubectl get ingress\n")),(0,r.kt)("p",null,"This command will list all the ingresses in your cluster.\n4. Create a DNS record for the host ",(0,r.kt)("inlineCode",{parentName:"p"},"myapp.example.com")," that points to the external IP address of the ingress controller.\n5. Verify that the service is accessible from the internet by accessing the URL ",(0,r.kt)("inlineCode",{parentName:"p"},"http://myapp.example.com/myapp")," in a web browser."),(0,r.kt)("p",null,"Conclusion:"),(0,r.kt)("p",null,"In this documentation, we have shown you how to set up a Kubernetes cluster in GCP, deploy an application to the cluster, create a service for the application, and use ingress to expose the service to the internet. This is just the beginning of what you can do with Kubernetes and GCP. With these tools, you can build and deploy complex applications at scale with ease."),(0,r.kt)("h1",{id:"container-registry"},"Container Registry"),(0,r.kt)("p",null,"To use the Google Cloud Platform (GCP) Container Registry with Dockerfiles and deploy the container image to a Google Kubernetes Engine (GKE) cluster, you can follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Enable the Container Registry API in the GCP Console.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Build the Docker image using the Dockerfile and tag it with the GCP Container Registry URL:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker build -t gcr.io/[PROJECT-ID]/[IMAGE]:[TAG] .\n")),(0,r.kt)("p",{parentName:"li"},"Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"[PROJECT-ID]")," with your GCP project ID, ",(0,r.kt)("inlineCode",{parentName:"p"},"[IMAGE]")," with the name of your image, and ",(0,r.kt)("inlineCode",{parentName:"p"},"[TAG]")," with a version tag for the image.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Push the Docker image to the GCP Container Registry:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker push gcr.io/[PROJECT-ID]/[IMAGE]:[TAG]\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a Kubernetes deployment YAML file to deploy the image to a GKE cluster:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-deployment\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: my-app\n  template:\n    metadata:\n      labels:\n        app: my-app\n    spec:\n      containers:\n      - name: my-container\n        image: gcr.io/[PROJECT-ID]/[IMAGE]:[TAG]\n        ports:\n        - containerPort: 80\n")),(0,r.kt)("p",{parentName:"li"},"Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"[PROJECT-ID]"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"[IMAGE]"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"[TAG]")," with the values used when tagging and pushing the image to the GCP Container Registry.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Apply the deployment YAML file to the GKE cluster:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"kubectl apply -f my-deployment.yaml\n")),(0,r.kt)("p",{parentName:"li"},"This will deploy the container image to the GKE cluster."))),(0,r.kt)("p",null,"Note: You may need to authenticate Docker to push the image to the GCP Container Registry using the ",(0,r.kt)("inlineCode",{parentName:"p"},"gcloud")," CLI tool. You can do this by running the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"gcloud auth configure-docker\n")),(0,r.kt)("h3",{id:"using-cicd-with-gcr"},"Using CI/CD with GCR"),(0,r.kt)("p",null,"To build Docker images and push them to the Google Cloud Platform (GCP) Container Registry as part of a CI/CD pipeline, you can follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Set up authentication to access the GCP project:"),(0,r.kt)("p",{parentName:"li"},"You will need to authenticate your CI/CD system to access your GCP project in order to push the Docker images to the GCP Container Registry. One way to do this is to create a service account with appropriate permissions and download a key file in JSON format. Then, set the ",(0,r.kt)("inlineCode",{parentName:"p"},"GOOGLE_APPLICATION_CREDENTIALS")," environment variable to the path of the key file in your CI/CD system.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Write a Dockerfile to build the Docker image:"),(0,r.kt)("p",{parentName:"li"},"Create a Dockerfile with instructions to build the Docker image for your application. The Dockerfile should include all necessary dependencies and configurations required to run your application.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Write a script to build and tag the Docker image:"),(0,r.kt)("p",{parentName:"li"},"In your CI/CD pipeline, write a script to build the Docker image and tag it with the GCP Container Registry URL. The URL should follow the format ",(0,r.kt)("inlineCode",{parentName:"p"},"gcr.io/[PROJECT-ID]/[IMAGE]:[TAG]"),". Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"[PROJECT-ID]")," with your GCP project ID, ",(0,r.kt)("inlineCode",{parentName:"p"},"[IMAGE]")," with the name of your Docker image, and ",(0,r.kt)("inlineCode",{parentName:"p"},"[TAG]")," with a version tag for the image. For example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# Build and tag the Docker image\ndocker build -t gcr.io/my-project/my-image:1.0 .\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Push the Docker image to the GCP Container Registry:"),(0,r.kt)("p",{parentName:"li"},"Once the Docker image is built and tagged, push it to the GCP Container Registry using the ",(0,r.kt)("inlineCode",{parentName:"p"},"docker push")," command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# Push the Docker image to the GCP Container Registry\ndocker push gcr.io/my-project/my-image:1.0\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Use the Docker image in your Kubernetes deployment:"),(0,r.kt)("p",{parentName:"li"},"After the Docker image is pushed to the GCP Container Registry, you can use it in your Kubernetes deployment YAML file to deploy the container image to a GKE cluster. The YAML file should reference the Docker image in the format ",(0,r.kt)("inlineCode",{parentName:"p"},"gcr.io/[PROJECT-ID]/[IMAGE]:[TAG]"),". For example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-deployment\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: my-app\n  template:\n    metadata:\n      labels:\n        app: my-app\n    spec:\n      containers:\n      - name: my-container\n        image: gcr.io/my-project/my-image:1.0\n        ports:\n        - containerPort: 80\n")),(0,r.kt)("p",{parentName:"li"},"Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"[PROJECT-ID]"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"[IMAGE]"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"[TAG]")," with the values used when tagging and pushing the image to the GCP Container Registry."))),(0,r.kt)("p",null,"Note: You may also consider using a container registry service integrated with your CI/CD pipeline, such as Google Cloud Build, which can automate the process of building and pushing Docker images to the GCP Container Registry."))}u.isMDXComponent=!0}}]);